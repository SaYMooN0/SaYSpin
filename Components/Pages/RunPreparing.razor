@page "/run_preparing"
@layout Layout.EmptyLayout
@inject AllGameController allGameController
@inject GameLoggingService gameLoggingService
<div class="run-preparing-page">
    <div class="content">
        @if (currentStageIsDifficlutyChoosing)
        {
            <ChooseDifficultyStageComponent onDifficultyChosen="@DifficultyChosen" />
            <NavLink href="">
                <div class="cancel-button unselectable">
                    Cancel
                </div>
            </NavLink>
        }
        else
        {
            <ChooseStarterKitStageComponent game="allGameController.Game" />
        }
    </div>
</div>

@code {
    private bool currentStageIsDifficlutyChoosing = true;
    private void DifficultyChosen(Difficulty difficulty)
    {
        allGameController.InitializeNewGame(difficulty, gameLoggingService);
        currentStageIsDifficlutyChoosing = false;

    }
}
